"use strict";var element=document.querySelector(".element"),width=window.innerWidth,height=window.innerHeight,renderer=new THREE.WebGLRenderer({antialias:!0});renderer.setSize(width,height),renderer.shadowMap.enabled=!0,renderer.shadowMap.type=THREE.PCFSoftShadowMap;var scene=new THREE.Scene,cubeGeometry=new THREE.CubeGeometry(100,100,100),cubeMaterial=new THREE.MeshLambertMaterial({color:16777215}),cube=new THREE.Mesh(cubeGeometry,cubeMaterial);cube.rotation.y=45*Math.PI/180,scene.add(cube);var geometry=new THREE.PlaneGeometry(1e4,1e4,100,100),material=new THREE.MeshBasicMaterial({color:16777215}),meshFloor=new THREE.Mesh(geometry,material);meshFloor.rotation.x=-90*Math.PI/180,meshFloor.position.y=-100,meshFloor.receiveShadow=!0,scene.add(meshFloor);var camera=new THREE.PerspectiveCamera(45,width/height,.1,1e3);camera.position.y=280,camera.position.z=600,camera.lookAt(cube.position),scene.add(camera);var pointLight=new THREE.PointLight(16777215);pointLight.position.set(0,300,200),pointLight.castShadow=!0,scene.add(pointLight);var ambientLight=new THREE.AmbientLight(4210752,.3);scene.add(ambientLight);var button=document.querySelector(".button");function onClick(){if("function"==typeof DeviceOrientationEvent.requestPermission)DeviceOrientationEvent.requestPermission().then(function(e){"granted"===e&&window.addEventListener("deviceorientation",function(e){document.body.style.background="pink",button.style.display="none",element.appendChild(renderer.domElement),function t(){requestAnimationFrame(t),cube.rotation.x=e.beta/30,cube.rotation.y=-e.gamma/30,cube.rotation.z=-(e.alpha-180)/30,renderer.render(scene,camera)}()})}).catch(console.error);else{document.body.style.background="pink",button.style.display="none",element.appendChild(renderer.domElement),button.style.display="none",function e(){requestAnimationFrame(e),cube.rotation.y+=.01,renderer.render(scene,camera)}()}}button.addEventListener("click",onClick);